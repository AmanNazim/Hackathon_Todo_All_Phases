# Production Environment Variables Template
# Copy this file to .env.production and fill in the values
# NEVER commit .env.production to version control

# ============================================================================
# APPLICATION
# ============================================================================
APP_NAME="Todo Application API"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=production

# ============================================================================
# SERVER
# ============================================================================
HOST=0.0.0.0
PORT=8000
WORKERS=4

# ============================================================================
# DATABASE
# ============================================================================
# Neon PostgreSQL connection string
# Format: postgresql://user:password@host/database?sslmode=require
DATABASE_URL=postgresql://user:password@ep-example-123456.us-east-2.aws.neon.tech/todoapp?sslmode=require

# Connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# MUST be at least 32 characters
JWT_SECRET_KEY=CHANGE_ME_TO_A_SECURE_RANDOM_STRING_AT_LEAST_32_CHARS

JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
# SMTP server settings
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=YOUR_SENDGRID_API_KEY
SMTP_FROM_EMAIL=noreply@todoapp.com
SMTP_FROM_NAME="Todo App"
SMTP_USE_TLS=true

# Frontend URLs for email links
FRONTEND_URL=https://todoapp.com
PASSWORD_RESET_URL=https://todoapp.com/reset-password?token={token}
EMAIL_VERIFICATION_URL=https://todoapp.com/verify-email?token={token}

# ============================================================================
# SECURITY
# ============================================================================
# Allowed CORS origins (comma-separated)
ALLOWED_ORIGINS=https://todoapp.com,https://www.todoapp.com

# Password security
PASSWORD_MIN_LENGTH=8
PASSWORD_BCRYPT_ROUNDS=12

# Token expiration
PASSWORD_RESET_TOKEN_EXPIRE_HOURS=1
EMAIL_VERIFICATION_TOKEN_EXPIRE_HOURS=24

# Account lockout
MAX_FAILED_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=15

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis

# Redis connection for rate limiting
# Format: redis://[:password]@host:port/db
REDIS_URL=redis://default:password@redis.example.com:6379/0

# Rate limit rules (requests per window in seconds)
RATE_LIMIT_REGISTER=5
RATE_LIMIT_REGISTER_WINDOW=3600
RATE_LIMIT_LOGIN=5
RATE_LIMIT_LOGIN_WINDOW=900
RATE_LIMIT_FORGOT_PASSWORD=5
RATE_LIMIT_FORGOT_PASSWORD_WINDOW=900
RATE_LIMIT_RESEND_VERIFICATION=3
RATE_LIMIT_RESEND_VERIFICATION_WINDOW=3600

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/todoapp/app.log

# ============================================================================
# MONITORING
# ============================================================================
# Sentry error tracking (optional)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================================================
# AUDIT LOGGING
# ============================================================================
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# ============================================================================
# FEATURE FLAGS
# ============================================================================
ENABLE_EMAIL_VERIFICATION=true
ENABLE_PASSWORD_RESET=true
ENABLE_RATE_LIMITING=true
ENABLE_AUDIT_LOGGING=true

# ============================================================================
# PERFORMANCE
# ============================================================================
ENABLE_QUERY_LOGGING=false
SLOW_QUERY_THRESHOLD_MS=1000

# ============================================================================
# MAINTENANCE
# ============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System is under maintenance. Please try again later."
